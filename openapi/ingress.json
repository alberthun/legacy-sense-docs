{
  "openapi": "3.0.0",
  "info": {
    "title": "Ingress Api",
    "version": "1.0.0",
    "description": "The Ingress API allows devices to register with and send data to the Sixgill Sense platform. Currently, the API is is compatible with mobile (iOS, Android) and generic IoT devices, and it supports both JSON and Protobuf formatted data. \n\nThe data ingestion piece of the API is separated into two endpoints: mobile and IoT. The mobile endpoint is intended to be used by the Sixgill Reach SDKs for iOS and Android. The IoT endpoint is intended to ingest generic JSON data. IoT channels require a schema to be configured before data is sent over Ingress. See the [Schemas](http://docs.sixgill.com/schemas.html) guide for more information.\n"
  },
  "paths": {
    "/v1/registration": {
      "post": {
        "summary": "Register devices",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "apiKey"
                ],
                "properties": {
                  "apiKey": {
                    "example": "12345ABCDEF",
                    "type": "string"
                  },
                  "properties": {
                    "example": {
                      "model": "iPhone",
                      "type": "iOS"
                    },
                    "type": "object"
                  }
                }
              }
            }
          }
        },
        "tags": [
          "Register"
        ],
        "responses": {
          "200": {
            "description": "successful operation",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "token": {
                      "type": "string",
                      "description": "jwt token"
                    },
                    "deviceId": {
                      "type": "string",
                      "description": "device ID"
                    },
                    "organizationId": {
                      "type": "string",
                      "description": "device ID"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/v1/mobile/events": {
      "post": {
        "summary": "Send sensor data from mobile devices using the SDK",
        "description": "Mobile devices can create “events” that fire on a cadence specified in their configuration. Events send information on a device’s location, power and activity state, as well as timestamped readings of nearby beacons and wifis. Since events fire “updates” in FIFO order, downstream data processing can assume that each new update is the most recent. Updates do not include event configuration, device properties or user attributes unless one of them has changed since the last update. NOTE: timestamp is specified in milliseconds",
        "tags": [
          "Mobile"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "data": {
                    "type": "object",
                    "description": "Sensor data"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "no content"
          }
        }
      }
    },
    "/v1/mobile/configuration": {
      "get": {
        "summary": "Get the device's configuration",
        "description": "The Ingress API assigns every mobile device a configuration. This configuration specifies whether or not the device’s SDK should be enabled; how often the device should send data, or its collection cadence; what type of sensors it should use; and how long its local data should persist, or its event TTL.",
        "tags": [
          "Mobile"
        ],
        "responses": {
          "200": {
            "description": "",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "description": "Sensor data"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/v1/iot/events": {
      "post": {
        "summary": "Send sensor data from IoT devices",
        "description": "IoT devices can send sensor data events to this endpoint for ingestion into the Sense pipeline.",
        "tags": [
          "Mobile"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "data": {
                    "type": "object",
                    "description": "Sensor data per the pre-defined schema"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "204": {
            "description": "no content"
          },
          "401": {
            "description": "Unauthorized. Payload does not match the schema for this channel."
          }
        }
      }
    }
  }
}